
比特币挖矿难度的自动调节及其效果（2个真实案例）

号外：公众号「刘教链内参」今日发表《内参：BTC非零地址数、持有1枚以上地址数双双创下历史新高》。欢迎点击阅读。

* * *

隔夜比特币继续在29k上方震荡整理。

据8.13内参分析，目前比特币处于去库存阶段，矿工正在过量抛售之前囤积的BTC，以至于超量的供应和低迷的需求在目前这个区间达成了暂时的平衡。但是，对未来失去信心的矿工手里的现货并非无限的，总有出清的时候。到那个时候，继续保持增长的需求将推动价格水平的上升。

众所周知，比特币实现了BTC的去中心化生产发行。但是，对其能够实现去中心化的原理和机制，却如夜来香一般的幽微，闻其香而不知其所踪。比特币系统最神奇的机制之一，当属挖矿难度的调节机制。这是比特币实现供应成本和需求价格之间的微妙平衡的关键机制，屹立十余年，历经风霜雪雨，在完全无需人工干预的情况下自发自动地完成了对市场的调节，可比“国之利器”。

这个机制的设计是很简单的。每2016个区块（大约2周左右）全网调节一次难度。计算此前2015个区块（此处中本聪犯了一个错误，把2016写成了2015）的生产时间，将其与理想生产时间（10分钟一个区块）进行比较，得到一个调节系数。如果实际生产慢了，就调低难度；反之，如果实际生产快乐，就调高难度。

为了避免难度发生过于剧烈的调整造成网络不稳定，限制难度调整只能在当前难度上下4倍的范围内进行调节，即调整量最高不超过当前难度的300%，不低于当前难度的-75%。

看起来平平无奇是不？下面我们就通过两个真实的例子和数据，来看一看这个貌似简单的机制所发挥的作用。

* * *

第一个例子是矿工挖矿发行BTC的盈亏情况，以此看出难度调节机制是否能够促进一个有效市场的形成。

直接看glassnode的数据。下面两张图是教链选出来的，分别是矿工利润和成本曲线，以及矿工盈亏日期统计。

20230814-B01.png
图一：矿工利润vs成本

20230814-B02.png
图二：矿工盈亏日

根据估算，自2010年比特币开始有二级市场开放交易以来，矿工累计共获得了488亿美刀的收入，投入了358亿美刀的成本。整个BTC挖矿产业共产生了130亿美刀的收益，累计收益率不到37%，折算到13年的时间相当于年化复利增长率（CAGR）仅有区区2.4% ！可见，比特币简直就是有史以来最良心的货币发行系统，从事发行的矿工也不能赚取超额收益，可以认为没有铸币税。

而矿工盈利的日子仅有47%，大部分时间都是亏损的。从经济学上讲，在供需平衡的完美市场，价格将等于生产成本（利润率为0）。从事比特币生产的矿工盈亏的比例如此接近50:50，显示了比特币的难度调节机制在实现市场均衡方面极其优秀地完成了任务。

* * *

第二个例子则展现了比特币网络遭受主权国家级别的打击时，能否保持正常工作并迅速恢复。

下图是比特币全网算力波动图线。

20230814-B03.png
图三：比特币哈希率

红框部分展现了2021年4月-7月的一次史无前例的对算力的集中攻击。算力从5月中旬最高接近200E，至6月底最低约68E，短短一个半月丧失了约66%的算力。

但是如果我们来看一下那段时间的出块速度，有波动，但是并没有特别严重。

20230814-B04.png
图四：比特币出块速度

四月份的第一波打击，做了一个预演。当5、6月份的风暴来袭之际，网络已经做好了准备。在最糟糕的时候，出块速度也仅仅是延宕了一倍多，到了20多分钟。熟悉比特币出块是泊松分布的朋友知道，正常情况下，比特币也偶有间隔半小时甚至一小时出块的情况，所以这一外部冲击所导致的波动性，完全可以被内部的随机性所吸收、中和。

从难度调节曲线上，我们更能看出这一机制是如何在比特币网络遭受破坏性外部冲击的情况下做出迅速、果断、有力、稳重的反应的。

20230814-B05.png
图五：比特币挖矿难度

在4月份经受冲击后，网络下调了难度。这使得当算力在5月份延续增长态势时，难度并未更快增长。这为迎接后续的冲击摆了一个更好一点的姿势。在5、6月经受持续冲击后，挖矿难度随着算力的下降而多次下调。最大一次从6月底到7月初，直接从20T下调到了14T，下调幅度30%。从5月中旬25T到7月初14T，累计降了44%。

可见，难度下调并不需要达到算力减少同等比例，就可以实现保持网络出块基本稳定的目标。

到了2021年底，全网算力基本就恢复到了5月中旬的水平。到2023年的今天，全网算力已经达到约400E的新高度，大概是2021年5月中旬的2倍。而挖矿难度，也水涨船高，从当初的25T涨到了如今的50T，也是翻了一番。

* * *

从上述真实发生过的事例来看，比特币的难度调节机制无论是在自由市场调节还是在对抗暴力侵犯方面，都能很好地完成任务。更厉害的是，这一机制的执行完全是靠算法的分布式运行，而根本不需要有一个中心权威或者中央机构来从中协调和指挥。

