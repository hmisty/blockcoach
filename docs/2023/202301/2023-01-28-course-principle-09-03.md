---
layout: post
title: "【刘教链比特币原理】9-3 快速支付"
date: 2023-01-21 08:00:00 +0800
categories: essay
---

付费合集文章前言：无

---

本节课我们开始学习第九章“轻量账本压缩百倍 快速支付不到十秒”的第三小节“快速支付”。

## 本章目录：

### 第九章 轻量账本压缩百倍 快速支付不到十秒
第1节 区块头和默克尔树
第2节 简化支付验证
#### 第3节 快速支付

## 本节音频：

【音频】

## 学习笔记：

中本聪用零食售卖机的例子说，实际上不用10秒钟，就可以很好的完成支付，真的很好，欺诈率比信用卡都要低。

有读者朋友回复前文，提了一个很好的问题，那就是如果比特币未来使用量特别特别大的时候，交易量远远大于打包速度，那么就会出现阻塞问题而导致迟迟无法打包到区块了。众所周知，比特币的区块尺寸是一个非常重要的核心参数，其大小被严格限制，因为这个参数是交易吞吐量和网络安全性的微妙平衡，所以历经2015-2017数年的激励争论甚至斗争而仍保持不变至今。同时，区块尺寸又是记账服务的需求方，也就是转账交易双方，和记账服务的提供方，也就是比特币矿工之间的一个重要博弈点。

矿工被工作量证明约束，只能10分钟出一个块，也就是记一次账，而且由于区块尺寸是有限的，这本账能够容纳的交易数量就是有限的。于是需求方就会竞争这有限数量的空间，就像土地招拍挂一样，采取第一高价原则进行竞拍，价高者得，也就是愿意付出更高手续费的交易会优先得到矿工的处理和打包。不是机制规定了矿工必须选择价高者，而是由于矿工自私自利的动机和人性，它们在正常情况下往往会而且应当会选择价高者，也就是把交易按照手续费高低排序，从高到低选择交易列表打包到区块。

这样就造成一个问题，就是交易量比较大的时候，支付交易手续费较少的交易可能就很难得到打包处理。这本来是公平合理的。但是这个最低的交易手续费，会为交易的金额带来一个最小限制，让小于这个金额的交易变得不划算。就像买一杯咖啡需要5美元，但是支付手续费要收30美元（约0.0005 BTC * 6万刀）的时候，交易双方可能会感觉这项支付服务有些过于昂贵了。

但是这个问题并不适合一拍脑袋通过盲目扩大区块的物理尺寸来解决。一方面是上面和之前说过多次的安全性、平衡性的问题，另一方面是矿工收入的问题。扩大区块容量从而削弱手续费竞争，降低了手续费，必须由更大数量的交易量来“对冲”、弥补，否则就会导致矿工收入下降，矿工减少硬件投入和算力投入，从而降低网络安全性。降低的网络安全性会导致网络价值的下降，从而降低币价。降低的币价会进一步恶化矿工的收入，从而重复这一“死亡螺旋”，直至跌到新的平衡点。

更好的可能方案是通过所谓的“二层”来解决。也就是把小额交易放到链外的一个网络上去记账，但是资金安全性和交易安全性仍然由主网络的区块链来保障。2018年推出的闪电网络在这方面取得了一些初步的成果。前路漫漫，革命尚未成功，同志仍需努力。

## 课外资料：

以下是第九章“轻量账本压缩百倍 快速支付不到十秒”的补充学习材料，请在本章3节课学习过程中使用。

1. 中本聪《比特币白皮书》第7小节“回收磁盘空间”以及第11小节“简化支付验证”
https://mp.weixin.qq.com/s/7R-THHIoTZfmAFSsQwdcZg （比特币白皮书中文版（刘教链译本））
https://mp.weixin.qq.com/s/U_qkDkAud0Hg4wyWeKAdZw （比特币白皮书英文原版）
2. 默克尔树（Merkle Tree）在线演示工具：https://prathamudeshmukh.github.io/merkle-tree-demo/ （英文）
3. 【扩展阅读】《精通比特币》第9章“区块链”第9.7节“Merkle Tree”以及第9.8节“SPV”：https://www.8btc.com/books/834/masterbitcoin2cn/_book/ch09.html （中文）

## 课后作业：

以下是第九章“轻量账本压缩百倍 快速支付不到十秒”的作业。请学完本章之后尝试一下，并把你的答案发到学习群进行分享，和其他学友一起进步。

1. 使用默克尔树（Merkle Tree）在线演示工具，输入“刘教链比特币原理”作为数据，点击“Construct Tree”按钮构建默克尔树。请问默克尔树根的哈希值是什么？（把这棵树截图和大家分享一下吧！）
2. 请问在比特币区块链上块高度为30万的区块（区块哈希是000000000000000082ccf8f1557c5d40b21edabb18d2d691cfbf87118bac7254）所包含的默克尔树根（Merkle Root）的值是什么？
3. 选择题：有一位朋友向你兜售一种新型的数字货币，他说，比特币具备的全部优良特性（比如彻底的、完全的去中心化）这个新币都具备，同时该新币具有大大超越比特币的性能，主要是交易速度特别高，可以高达每秒钟几万、几十万甚至上百万笔交易（他用了一个你听不太懂的三字母缩写“TPS”），而且他告诉你为该新币站台的专家团包含了诺贝尔奖得主、美国知名教授、以及经常在媒体上露面的资本大咖，现在抓紧购买，上市后一定大涨。请问你的这位朋友是哪种角色的可能性更大：（A）好人；（B）专家；（C）傻子；（D）骗子。


(公众号/同名推特：刘教链。知识星球：公众号回复“星球”)
(免责声明：本文内容均不构成任何投资建议。加密货币为极高风险品种，有随时归零的风险，请谨慎参与，自我负责。)
