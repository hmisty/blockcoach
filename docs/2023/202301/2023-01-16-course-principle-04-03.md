---
layout: post
title: "【刘教链比特币原理】4-3 一道猜数字的数学题"
date: 2023-01-16 08:00:00 +0800
categories: essay
---

付费合集文章前言：无

---

本节课我们开始学习第四章“交易打包进区块 前后链接区块链”的第三小节“一道猜数字的数学题”。

## 本章目录：

### 第四章 交易打包进区块 前后链接区块链
第1节 哈希链条
第2节 时间戳服务
#### 第3节 一道猜数字的数学题

## 本节音频：

【音频】

## 学习笔记：

前面课程学到了每个区块都用一把哈希锁锁住防篡改，每一个哈希锁都会加固它前面的锁，层层嵌套。但是，哈希计算对今天的计算机的算力而言太小菜一碟，就算是把整条区块链上的每一把哈希锁都打破重做，也花不了几秒钟。那么就要把哈希锁升级成强化版本。中本聪发现有人早就提出过强化哈希锁的方法，那个人就是Adam Back。早在2002年Adam Back的论文里，他就给出了构造这样的强化型哈希锁的方法，叫做“工作量证明”，英文叫Proof of Work，缩写为PoW。

具体的，就是要求寻找一个符合特定模式的哈希值，比如前面几位是0。安全哈希有个特点，就是只能用穷举法去暴力尝试。这就需要耗费计算机大量的计算时间，Adam Back称之为工作量，计算的工作量。而找到这样一个符合要求的哈希值，就自然证明了计算者确实付出了这么大的工作量，即计算时间。这种方法的巧妙之处还在于，计算者需要耗费大量时间才能找到结果，而验算者却可以不费吹灰之力就能验证出计算者算的对不对。这些特性，都是中本聪将其应用的比特币中所必须的。

Adam Back只是把PoW用到了反垃圾邮件中。是中本聪让这块金子重新大放异彩。中本聪厉害的地方在于，他是间接使用了PoW的时间消耗证明，而不是直接使用。什么意思呢？Adam Back以及其他人，是直接利用PoW消耗时间的特点，让每一封邮件对应生成一个PoW，用来证明这一封邮件消耗了这么多计算时间。但是中本聪却并不是直接把比特币和PoW相对应，而是把PoW和区块相对应，区块里面包含coinbase交易来铸币，新增铸币的数量则是变化的，开始是50个比特币/区块，21万个区块（4年左右）就减半成25个/区块，再过4年再次减半为12.5个/区块，如此这般。

这样一来，PoW消耗的工作时间会对应不同数量的比特币。劳动价值论说，当需求存在时，劳动时间决定价值创造，因为价值本质上是一种生产关系，是劳动时间关系的交叉对应。由价值而生出了交换价值，交换价值又生出了价格。比特币网络总是在动态调节难度，使得PoW消耗时间均匀，恒定在大约10分钟一个区块，但是这些价值被不同数量的比特币所吸收。每当比特币产量减半，每个比特币吸收的价值都要翻倍（如果其它条件不变。实际还有多种因素，比如，全网算力增加则会对应PoW单位时间的价值增加，等等）。这就是比特币产量减半总会在其后1年半左右推动一次比特币牛市的发生，从而产生4年左右的牛熊周期。这个周期和任何其它传统资产的周期都没有很大相关性，因为这个周期是内建在比特币自身之中的规律。

## 课外资料：

以下是第四章“交易打包进区块 前后链接区块链”的补充学习材料，请在本章3节课学习过程中使用。

1. 中本聪《比特币白皮书》第3小节“时间戳服务器”
https://mp.weixin.qq.com/s/7R-THHIoTZfmAFSsQwdcZg （比特币白皮书中文版（刘教链译本））
https://mp.weixin.qq.com/s/U_qkDkAud0Hg4wyWeKAdZw （比特币白皮书英文原版）
2. 比特币区块链在线查看工具：https://blockstream.info/ （英文）https://mempool.space/ （中文、英文） 
3. 【扩展阅读】《精通比特币》第9章“区块链”：https://www.8btc.com/books/834/masterbitcoin2cn/_book/ch09.html （中文）

## 课后作业：

以下是第四章“交易打包进区块 前后链接区块链”的作业。请学完本章之后尝试一下，并把你的答案发到学习群进行分享，和其他学友一起进步。

1. 使用比特币区块链在线查看工具，查看块高度为30万的区块（是在2014年5月10日这一天产生的）里面打包了多少笔交易？数数区块哈希值的开头有多少个字符“0”？每个字符“0”（十六进制数字）代表4个比特0（二进制数字），那么这个区块哈希值的开头有多少个比特0呢？
2. 块高度30万的区块里包含的指向上一个区块的哈希值是多少？这个哈希值的区块的高度是多少？包含了多少笔交易？
3. 块高度30万的区块生成的具体时间（精确到秒）是多少？其上一个区块的生成时间又是多少（精确到秒）？两者间隔多少分钟？


(公众号：刘教链。推特：@liujiaolian。知识星球：公众号回复“星球”)
(免责声明：本文内容均不构成任何投资建议。加密货币为极高风险品种，有随时归零的风险，请谨慎参与，自我负责。)
