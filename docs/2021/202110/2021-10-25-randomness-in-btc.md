---
layout: post
title: "比特币中的随机性"
date: 2021-10-25 8:00:00 +0800
categories: essay
---

有人说，投资比特币不就是低买高卖嘛，为什么要读白皮书，研究中本聪，了解它的技术原理呢？甚至于打了个比方，说是坐飞机并不需要了解飞机是怎么工作的，云云。

的确，我们坐飞机确实不需要知道飞机内部是怎么工作的，但是我们大抵还是知道飞机能飞起来的原理的，那就是喷气式发动机给了飞机一个巨大的推进力，让空气在机翼划过，产生了向上的升力。的确，有更多的人可能连这些基本原理也完全不了解，而这并不影响他们坐上飞机，到达目的地。

不过，投资并不是坐飞机。投资者也并不止步于用户。要想对一家号称采用了全新动力系统的飞机公司进行恰当的投资，恐怕还是不免需要多做一些功课的。

当我们对比特币的了解越深入，就越是对它的巧妙设计感到赞叹。

从外向内层层剥开，最开始我们认为比特币是一种价值媒介。至于你定义它是货币还是资产，那只是对它不同性质的总括。当这个媒介作用发生在空间维度上，也就是从一个人手里传递到另一个人手里，我们称之为交换媒介；当这个媒介作用发生在时间维度上，也就是从今天传递到明天，我们称之为价值存储。

比特币能够实现真正的隔空传送，并且损耗极小（以比特币本位计量，矿工费按字节收取）。

然后我们要了解它是怎么做到这一点的。

我们的第一重叙事是公共记账本。

比特币系统维护了一个公共记账本，记录所有的转账交易，从而实现了价值的转移。

之所以要用公共记账本，是因为系统要去中心化。不能由一个权威中心来替所有人保管一个账本，所以需要所有人都保管同样一份账本。

问题是我们如何确保每个人都能就一份账本达成一致同意呢？总有人出于各种各样的目的和利益，对账本的记录提出质疑，甚至试图篡改。

这就进入了我们的第二重叙事，工作量证明（PoW, Proof-of-Work）。

这一重叙事又被称为共识机制。顾名思义，就是让参与各方达成一致的机制。

最简单的方法是引入中心权威，但这同时为系统引入了脆弱性。或者把系统放在一个温室般受保护的、隔离的、安全的环境里，就像互联网IDC机房那样。如果这也做不到，那么就变成了开放系统，好人坏人都可以自由出入，这在1980年代就被计算机科学家莱斯利·兰伯特称之为拜占庭系统。

不幸的是，拜占庭系统的问题很难解决。特别是在大规模异步网络条件下，无解。

直到中本聪发明比特币，提出了PoW共识机制，才解决了这一问题。

解决方案就是，所有人都只相信PoW的计算结果，而不相信任何人。

PoW的计算结果包含了对于账本的验证，所以只要PoW计算结果是正确的，账本就是正确的。

PoW计算结果为什么不会被伪造呢？因为需要先购买巨大的算力硬件，然后消耗大量的电能才能生成PoW。

其实在第二重叙事前，我们应该还有一重叙事，就是时间链，或者比特币白皮书中说的时间戳服务器。比特币的账本具有顺序，从而拥有了对交易按时间排序的功能。但是这个时间，并不是外部时间，而是比特币系统内生的时间。这时间的来源，其实还是工作量证明PoW。

但是在工作量证明和时间链之间，我们产生了大量的迷思。

相当多的人相信可以去掉工作量证明，实现同等效果的时间链。像Solana这种直接采用一个中心化的定序器来给整个系统确定出块顺序的解决方案，可以说既是抓到了区块链的要点，又是对于去中心化最大的亵渎。

当然也有人说，内生定序并非是区块链的必要条件，那么这样的区块链也就退化成了一个没有时间而只有空间的数据结构了，就像所有的数据库一样。这样的数据结构，可以存储数据，但是却决然无法存储价值。因为价值，乃至于货币，其本质就是时间，而不是什么别的东西。

当你记录的时间戳源于外部，而非内生，无法自证，历史记录也就变得完全不可相信，时间就消失了，价值也就荡然无存。

所有的联盟链，都是空有区块链的形（数据结构），而没有区块链的实（内生时间）。

比特币的内生时间，就是时间戳，就是顺序。1，2，3，4，……区块高度确定的顺序，像时钟一般的滴滴答答。可以自证的顺序，由PoW进行证明。

比特币的定序是如何发生的？这就引出我们的第三重叙事，随机性。

我们需要一只无形的上帝之手，随机地挑选一个节点，并给予它一个证据，所有人都能够相信的证据，由它来合法地生成一个新账本（新区块）。

Paxos类的非BFT算法需要外部时钟同步，才能够确保投票不会紊乱。BFT类的算法同样依靠投票，所以如果失去了同步时钟的辅助，同样会发生投票紊乱。同步时钟，就意味着需要外部的中心化提供方和维护者，从而削弱了其去中心化的程度。如果再求节点匿名，那么就是几乎不可能实现的了。

比特币找到了这个上帝之手，那就是数学（密码学）。

因为我们对于数字有着最为普遍和牢固的共识，所以我们可以相信远在天边的匿名计算者所计算出来的结果的正确性。

密码学构造确保了，这个计算结果具有不可预知性，从而，无法被提前猜到。

神奇之处在于，PoW是哈希计算，而哈希计算是确定性的，并不是随机性的。

比特币用完全确定性的算法，实现了完全随机性的结果。

在PoW被找到之前，这个结果是高度不确定的。一旦找到，它就是完全确定性的和可验证的。仿佛是薛定谔的猫一般，开箱前生死未卜，开箱后生死立判。我称之为薛定谔式的随机性。

无论是谁，率先计算出来结果，就意味着获得了全球参与者的认可和共识。

我们不需要一个上帝。数学就是我们的上帝。

(公众号：刘教链。知识星球：公众号回复“星球”)
(免责声明：本文内容均不构成任何投资建议。加密货币为极高风险品种，有随时归零的风险，请谨慎参与，自我负责。)
